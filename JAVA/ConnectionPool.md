## DB Connection
  - <img width="634" alt="스크린샷 2023-06-14 오후 9 30 16" src="https://github.com/pnci1029/TIL/assets/81909140/e953a609-2a7b-4e14-ace3-01fe758039de">

    ```
    커넥션 획득과정
      1. DB 드라이버에서 TCP/IP 커넥션 연결 (3 way handshake 같은 네트워크 동작 발생)
    
      2. DB 드라이버는 TCP/IP 커넥션이 연결되면 데이터베이스에 ID와 PW 전달
    
      3. 인증으 받고 내부에 DB 세션 생성
    
      4. 커넥션이 완료되었다는 응답 발생
    
      5. DB 드라이버는 커넥션 객체를 생성하여 클라이언트에 반환

      => 커넥션을 만드는 일이 복잡하고 시간이 많이 듦
      => 커넥션 생성시에 리소스가 많이 소모
      => 응답속도에 영향을 줌

    -> 커넥션 풀을 사용하여 개선
    ```
## Connection pool
  - 위 문제를 해결하기 위해 DB 커넥션을 미리 만들어두고 관리하는 커넥션 풀 사용
  - <img width="659" alt="스크린샷 2023-06-14 오후 9 42 25" src="https://github.com/pnci1029/TIL/assets/81909140/c890103f-7286-408d-b503-905e69eca412">
  ```
    TCP/IP와 연결되어있고, DB 내부 세션을 만들어 둔 커넥션을 미리 생성


    1. 어플리케이션 로직은 커넥션 풀에 커넥션 요청
    2. 사용가능한 커넥션 풀 존재 시 커넥션을 사용하여 SQL 전달 후 응답 반환
    3. 커넥션 사용 후 커넥션 풀에 다시 반환
      + 커넥션 종료가 아니라 살아있는 상태로 커넥션 풀에 반환
  ```
#### 커넥션 풀 설정
  ```
    - 일반적으로 10개 사용

    - 서버나 DB 스펙에 따른 커넥션 수 지정

    - 커넥션 개수를 제한하여 커넥션풀에 커넥션이 무한정 생성되는것을 방지 -> DB 보호

    - 커넥션 풀 오픈소스로는 Hikari-cp, tomcat-jdbc-pool, commons-dbcp2 등이 있다
  ```


