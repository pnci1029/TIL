# 데이터베이스 정규화(Normalization)

  ```
    DB 정규화
      - 이상현상이 있는 테이블(릴레이션)을 분해하는 과정
      - 이상현상이 있는 테이블을 분해하여 여러개의 테이블을 생성
      - 이를 단계별로 구분하여 정규형이 높아질수록 이상현상은 줄어듦
      - 정규화된 데이터베이스에서 추가 확장 시 구조를 변경하지않거나, 일부만 변경하여도 됨
      - 데이터 모델의 유연성이 높아진다.
      
      - 데이터 테이블 증가로 테이블간의 JOIN 연산이 추가됨
      - 조인 연산이 많아져 성능이 안좋아질 경우 반정규화를 적용시킬 수 있다.
  ```
  #  
  ## 제 1정규화
  #### 정규화 이전
  - ![정규화가필요한테이블](https://github.com/pnci1029/TIL/assets/81909140/eb691d88-86ec-47fb-badc-63a23fd2b644)
    ```
    - 컬럼이 값을 하나만 가지도록 분해
    - 데이터 중복을 허용하지 않음
    ```
  #### 정규화 이후
  - ![제1정규형](https://github.com/pnci1029/TIL/assets/81909140/1e39079b-fcd7-4507-9c18-b54545cb6979)
    ```
      - 각 컬럼이 유니크 값을 가짐
      - 각 컬럼의 순서가 바뀌어도 문제가 발생하지않음
    ```
  #  
  ## 제 2정규화
  #### 정규화 이전
  - ![제2정규화가필요](https://github.com/pnci1029/TIL/assets/81909140/653ecf35-cfe4-466b-9329-cc1e37b89316)
    ```
      - 제 1정규화를 만족해야 한다
      - 테이블의 모든 열이 기본키에 의해 종속되어야함
    ```
  #### 정규화 이후
  - ![제2정규화처리](https://github.com/pnci1029/TIL/assets/81909140/170a1404-2c5f-4c11-a501-d0f98c8e17e7)
    ```
      - 학생번호와 강좌이름의 기본키로 가질 때 종속값에 따라 테이블을 분리하여 사용
    ```
  #  
  ## 제 3정규화
  #### 정규화 이전
  - ![제3정규화이전](https://github.com/pnci1029/TIL/assets/81909140/729df3d0-0e25-4ba1-aa55-8c0a99f3550b)
  ```
    - 제 2정규화가 된 테이블에 이행적 종속을 없애도록 테이블을 분리
      * 이행적 종속 : A->B, B->C일때 A->C가 성립하는것
  ```
  #### 정규화 이후
  - ![제3정규화이후](https://github.com/pnci1029/TIL/assets/81909140/6c19ab25-c8d3-4926-b14c-4cf6f3d986b0)
    ```
      - 학생번호를 알면 강좌이름과 수강료를 알 수 있음
      - 강좌이름을 알면 수강료를 알 수 있다.
      - 따라서 이행속성을 분리하여 제3정규화 처리
    ```
  #  
  ### * 함수의 종속성
  - ![함수종속서](https://github.com/pnci1029/TIL/assets/81909140/d5d87fda-def4-4bd4-8b21-c256443f03e2)
    - 화살표 : 함수간의 종속성
    - 직사각형 : 테이블 속성
    - 묶여있는 정사각형 : 직사각형 묶음
  ```
    함수 종속성
      - A라는 속성에 대해 알 때 서로 다른 속성 B애 대해 유일하게 알게되는 관계
        -> A->B형태로 표현하며, A는 B의 결정자라고 한다.
        -> A는 B의 결정자, B는 A에 의해 종속된다 라고 표현
      - 함수간의 의존관계
      - 함수의 결과가 다른함수에 영향을 미치는 관계 
    
  ```
  #  
  ### * 이상현상
  ```
  * 이상현상 
      - 데이터베이스를 정규화하지 않았을 때 발생하는 문제
      - 삽입이상, 갱신이상, 삭제이상
      
      1. 삽입이상
        - 데이터를 삽입할 때 원치않은 결과가 발생하는 현상
        - 불필요한 데이터를 추가해야만 삽입이 가능한 현상
        ex) 고객정보 테이블에서 주문 테이블을 삽입할 때 고객정보가 없는 경우 주문테이블을 삽입할 수 없음
      
      2. 갱신현상
        - 전체 데이터 중 일부의 데이터만 수정(갱신)할 때 데이터가 불일치하는 현상
        - 데이터를 수정할 때 데이터의 일관성이 깨지는 현상
         ex) 제품 정보를 보관하는 테이블에서 특정 제품 가격을 변경할 때 중복되는 제품 중 일부만 변경되어 일관성이 깨짐
         
      3. 삭제이상
        - 데이터 삭제 시 원치않은 데이터까지 삭제되는 현상
        - 특정 데이터 삭제로 인해 삭제되지 말아야 할 데이터까지 삭제되는 현상
        
  ```
  #  
  #  
  # 데이터베이스 반정규화(De-Normalization)
    ```
    DB 반정규화
      - 데이터베이스 성능을 위해 중복을 허용하고 JOIN 연산을 줄여 DB 성능을 향상시키는 방법
      - 주로 대량의 데이터를 읽는 성능을 개선하는 목적으로 사용
      - 
    ```
  #  
  #  
  #  
  #  
  #  
(refered by https://sodayeong.tistory.com/106, https://code-lab1.tistory.com/47, https://mangkyu.tistory.com/110, https://code-lab1.tistory.com/48)
